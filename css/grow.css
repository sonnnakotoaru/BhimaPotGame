html,body{height:100%;margin:0;background:#000;overflow:hidden}
body{padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);box-sizing:border-box}

:root{

  --grow-btn-blood-left: 75.78125%;
  --grow-btn-blood-top: 33.3333%;

  --grow-btn-warm-left: 75.78125%;
  --grow-btn-warm-top: 50%;

  --grow-btn-kitchen-left: 75.78125%;
  --grow-btn-kitchen-top: 66.6667%;

  --grow-btn-follow-left: 75.78125%;
  --grow-btn-follow-top: 66.6667%;

  --grow-btn-sleep-left: 75.78125%;
  --grow-btn-sleep-top: 55%;
}

#btn-blood{ position:absolute; left:var(--grow-btn-blood-left); top:var(--grow-btn-blood-top); }
#btn-warm{ position:absolute; left:var(--grow-btn-warm-left); top:var(--grow-btn-warm-top); }
#btn-kitchen{ position:absolute; left:var(--grow-btn-kitchen-left); top:var(--grow-btn-kitchen-top); }
#btn-follow{ position:absolute; left:var(--grow-btn-follow-left); top:var(--grow-btn-follow-top); }

#btn-sleep{ position:absolute; left:var(--grow-btn-sleep-left); top:var(--grow-btn-sleep-top); }

.btn-locked{

  filter: brightness(1.25);
  transition: filter 160ms ease;
}

#screen{position:fixed;left:50%;top:50%;width:1280px;height:720px;box-sizing:border-box;opacity:0;--transition-duration:400ms;transition:opacity var(--transition-duration) cubic-bezier(0.22,0.8,0.25,1);overflow:hidden;background:transparent;transform-origin:center center;transform: translate(-50%,-50%) scale(var(--screen-scale,1));}
#screen.visible{opacity:1}

.bg{position:absolute;left:0;top:0;width:1280px;height:720px;background-position:center center;background-repeat:no-repeat;background-size:1280px 720px;z-index:0;image-rendering:pixelated}

.scene-layer{
  position:absolute;left:0;top:0;width:1280px;height:720px;z-index:1;pointer-events:none
}

.scene-layer img{position:absolute;top:0;left:0;width:auto;height:auto;image-rendering:pixelated}

#vessel{ position:absolute; left:0; top:0; width:1280px; height:720px; max-width:none; max-height:none; image-rendering:pixelated; object-fit: none; z-index:10 }

#light-frame{ opacity: 1; transition: opacity 300ms ease }

#grow-dialog{
  position:absolute;
  left:0;
  top:0;
  width:1280px;
  height:720px;
  max-width:none;
  max-height:none;

  image-rendering:pixelated;
  z-index:70;
  pointer-events:none;
  display:none;
  opacity:0;
  transition: opacity 300ms ease;
}

#grow-dialog.visible{ display:block; opacity:1 }

.scene-layer .btn-ui, .btn-ui{ pointer-events:auto; cursor:pointer; }
.btn-ui:active{filter:brightness(1.5)}

.btn-ui.disabled{ pointer-events:none; cursor:default }

@media (max-width: 1280px){
  :root{ --screen-fit-w: calc((100vw - 20px) / 1280); --screen-fit-h: calc((100vh - 20px) / 720); }
  #screen{ width:1280px; height:720px; transform: translate(-50%,-50%) scale(min(var(--screen-fit-w), var(--screen-fit-h))); transform-origin:center center }
  .bg, .scene-layer{ width:1280px; height:720px }
  .scene-layer img, .btn-ui{ max-width:none; height:auto }
}

@keyframes shake-horror {
  0%{ transform: translate(0,0) rotate(0deg) skew(0deg,0deg); filter: blur(0px) saturate(1); }
  10%{ transform: translate(0,0) rotate(-4deg) skew(-8deg,3deg); filter: blur(2.0px) saturate(0.75); }
  20%{ transform: translate(0,0) rotate(5deg) skew(8deg,-3deg); filter: blur(3.0px) saturate(0.5); }
  30%{ transform: translate(0,0) rotate(-6deg) skew(-10deg,4deg); filter: blur(1.0px) saturate(0.7); }
  45%{ transform: translate(0,0) rotate(4deg) skew(6deg,-6deg); filter: blur(2.2px) saturate(0.4); }
  60%{ transform: translate(0,0) rotate(-3deg) skew(-4deg,3deg); filter: blur(1.8px) saturate(0.5); }
  80%{ transform: translate(0,0) rotate(2deg) skew(2deg,-2deg); filter: blur(1.0px) saturate(1); }
 100%{ transform: translate(0,0) rotate(0deg) skew(0deg,0deg); filter: blur(0px) saturate(1); }
}

.shake.horror{
  animation-name: shake-horror;
  animation-duration: 0.5s;
  animation-timing-function: ease-out;
  animation-fill-mode: both;

  will-change: transform, filter;
}

#gauge-karma.shake:not(.horror),
#gauge-karma.horizontal,
#gauge-karma.micro {
  animation: none !important;
  transform: none !important;
  filter: none !important;
}

#gauge-karma.shake.horror,
#gauge-karma.horror {
  image-rendering: auto !important;

  -webkit-filter: none !important;
  filter: none !important;
}

#grow-dialog.shake:not(.horror),
#grow-dialog.horizontal,
#grow-dialog.micro {
  animation: none !important;
  transform: none !important;
  filter: none !important;
}

#grow-dialog.shake.horror,
#grow-dialog.horror {
  image-rendering: auto !important;
  will-change: transform, filter;
  -webkit-filter: none !important;
  filter: none !important;
}

