# BhimaPotGame — Copilot / 開発者向けコーディングルール

この文書は、BhimaPotGame の全シーン（HTML / CSS / JS）で必ず守るべきコーディングルールをまとめたものです。
AI 支援（Copilot 等）を含むすべての開発者は、このルールに従ってください。

---

## 基本仕様

- 画面サイズは固定で 1280×720px とする。
- ページの余白（画面外）は黒 `#000`。
- 画面は常に画面中央に固定表示する（縦横中央揃え）。
- 各シーンはフェードイン・フェードアウトの演出を必ず行う（CSS の opacity のみで実装、黒色レイヤー・透過レイヤーは禁止、詳しくは "JS ルール" を参照）。
- すべての画像は 1280×720 で作成済みの前提で、拡大・縮小・補間（CSS トランスフォームを含む）は禁止。
- ドット絵を保持するため、CSS にて必ず `image-rendering: pixelated;` を指定すること。
- ぼかし（blur）・光沢・半透明の全画面レイヤーは禁止。

## ボタン仕様

- すべてのボタン画像は等倍（原寸）で表示すること。拡大・縮小は不可。
- ボタンは座標指定（absolute + left/top）で配置できるようにする。
- 押下時（`:active`）は明度を上げて発光表現を行う。例:

```css
#btn:active {
  filter: brightness(1.5);
}
```

- 押下時に効果音 `assets/sound/se/se_button_click.mp3` を再生すること。
- 効果音は `preload="auto"` で読み込み、各ページで明示的に再生停止を制御すること。

## 表示設定（共通 CSS ルール）

- すべての画像の透過情報を保持する（背景と一体化するような黒レイヤーや合成は禁止）。
- CSS フィルター（blur、contrast、saturate、hue-rotate など）は禁止。
- ドロップシャドウ・グラデーションは禁止。
- スクロール禁止（`overflow: hidden;` をルートに設定）。
- フォントは `KaisotaiNext` を使用し、基本フォントサイズは `40px` とする（必要に応じ補正可）。
- 画像上にテキストを直接重ねない。必要なら別レイヤーで配置する。

## スクリプト（JS）ルール

- ページ遷移前には必ずフェードアウト（1.0〜1.5 秒）を実行すること。
- フェード演出は `opacity` のみで実装すること（黒レイヤー・透明レイヤーは禁止）。
- 各ページでオーディオは明示的に `play()` / `pause()` / `currentTime = 0` などの制御を行う。
- 画像の `src` パスは必ず `assets/` で始めること。

## 禁止事項（要チェック）

- CSS フィルターやブラーを使った表現
- 透明な黒レイヤー（半透明の #000）でのフェードや演出
- 自動スケーリング（`width:100%` / `height:auto`）
- CSS トランスフォームによる拡大縮小（`scale()` など）
- ドット絵へのアンチエイリアス（ブラウザの補間処理を許す設定）

---

## 実装テンプレートとチェックリスト

以下のチェックリストを各シーン実装時に必ず満たしてください。

- [ ] `index.html`（あるいは各 scene 文件）で `#screen` コンテナを作る。幅 `1280px`、高さ `720px`。
- [ ] `body` に `background: #000; overflow: hidden; display:flex; align-items:center; justify-content:center;` を設定する。
- [ ] 全ての画像要素（`img` と背景要素）に `image-rendering: pixelated; image-rendering: crisp-edges; -ms-interpolation-mode: nearest-neighbor;` を付与する。
- [ ] ボタンは `position:absolute` で座標指定可能にし、幅と高さは原寸に保つ（`width:auto; height:auto;`）。
- [ ] ボタンのクリックで `se_button_click.mp3` を再生し、再生前に `preload="auto"` が設定されていること。
- [ ] フェードインはページロード時に `#screen` に `.visible` を付けることで行い、フェードアウトはボタンクリック時に `.visible` を外すことで行う（遷移はフェード後に実行）。

## Copilot 用ガイド（短縮）

1. 画面背景と全体コンテナは 1280×720 を基準に扱う。
2. 画像は原寸で `img` 要素として配置。CSS で拡大・縮小しない。
3. JS によるフェードは `opacity` のみ使用し、`setTimeout` で遷移を制御する。
4. 効果音は `preload` を設定し、ユーザー操作に紐づけて再生する。

---

ファイルや実装のテンプレートが必要であれば、このルールに合わせた `index.html` / `css` / `js` の最小テンプレートを作成します。変更や追加ルールがあれば指示してください。
